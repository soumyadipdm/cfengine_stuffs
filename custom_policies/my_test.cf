bundle agent my_test {
  vars:
      "mylist" slist => { "one", "two", "three" };
      "jsonlist" data => readjson("/var/cfengine/inputs/custom_policies/files_repo/test.json", 9999999);
  classes:
    generic_host.!ubuntu_desktop::
      "tmp_cf_file_exists" and => { fileexists("/tmp/cf_file"), islink("/tmp/cf_file") };

  files:
    generic_host.!tmp_cf_file_exists::
      "/tmp/cf_file" create => "true";
  methods:
      "any" usebundle => my_bundle("$(mylist)");

  reports:
    any::
      "$(jsonlist[this_range])";
    generic_host.tmp_cf_file_exists::
      "/tmp/cf_file exists and it's a link";

    genric_host.!tmp_cf_file_exists::
      "/tmp/cf_file does not exist or maybe its not a link";

    cfe_mps::
      "range is all set!!!";

    generic_host::
      "$(sys.local_libdir)";
}

bundle agent my_bundle(arg1) {
  reports:
    "this is the report";
}
